const fs = require("graceful-fs");
const detectCharacterEncoding = require('chardet').detectFileSync;
const spawn = require("child_process").spawn;
const bot_data = require("../bot_data.js");

const ALL_DIRS = {
    menuText: [
        "00_System.pak",
        "01_Contents.pak",
        "02_BgmName.pak",
        "03_EventName.pak",
        "04_ItemName.pak",
        "05_ItemDescription.pak",
        "06_KotodamaName.pak",
        "07_KotodamaDesc1.pak",
        "08_KotodamaDesc2.pak",
        "09_KotodamaDesc3.pak",
        "10_Special.pak",
        "11_Report.pak",
        "12_SkillName.pak",
        "13_SkillDesc.pak",
        "14_Rule.pak",
        "15_OperateMode.pak",
        "16_OperateDesc.pak",
        "17_FloorName.pak",
        "18_MapName.pak",
        "19_HandBookMenu.pak",
        "20_HandBookDesc.pak",
        "21_Briefing.pak",
        "22_Profile.pak",
        "23_Anagram.pak",
        "24_MovieName.pak",
        "25_SkillDescHB.pak",
        "26_Menu.pak",
        "27_ArtWorkName.pak",
        "28_Credit.pak",
        "29_OperateModeR.pak",
        "30_OperateDescR.pak",
        "31_OperateSysR.pak",
        "32_CharaName.pak",
        "33_MapNameEnglish.pak",
        "34_BgmNameEnglish.pak",
        "35_Option.pak",
        "36_Pet.pak",
        "37_SkillExchange.pak",
        "38_SurvivalMenu.pak",
        "39_UsamiFlower.pak",
        "40_SurvivalItem.pak",
        "41_SurvivalItemDesc.pak",
        "42_SurvivalMaterial.pak",
        "43_SurvivalMaterialDesc.pak",
        "44_EquipName.pak",
        "45_EquipDesc.pak",
        "46_StageTitle.pak",
        "47_SurvivalTitle.pak",
        "48_TwilightText.pak",
        "49_Novel.pak",
    ],
    prologue: [
        "e00_000_001.lin",
        "e00_000_002.lin",
        "e00_000_003.lin",
        "e00_000_004.lin",
        "e00_000_100.lin",
        "e00_000_101.lin",
        "e00_000_102.lin",
        "e00_000_142.lin",
        "e00_000_143.lin",
        "e00_000_144.lin",
        "e00_000_145.lin",
        "e00_000_180.lin",
        "e00_001_001.lin",
        "e00_001_180.lin",
        "e00_002_001.lin",
        "e00_003_001.lin",
        "e00_003_002.lin",
        "e00_003_003.lin",
        "e00_003_004.lin",
        "e00_003_019.lin",
        "e00_003_100.lin",
        "e00_003_101.lin",
        "e00_003_102.lin",
        "e00_003_142.lin",
        "e00_005_001.lin",
        "e00_006_001.lin",
        "e00_006_100.lin",
        "e00_006_142.lin",
        "e00_007_142.lin",
        "e00_007_143.lin",
        "e00_999_000.lin",
        "e00_999_001.lin",
        "e00_999_002.lin",
        "e00_999_003.lin",
        "e00_999_004.lin",
        "e00_999_008.lin",
        "e00_999_010.lin",
        "e00_999_011.lin",
        "e00_999_013.lin",
        "e00_999_014.lin",
        "e00_999_015.lin",
        "e00_999_016.lin",
        "e00_999_017.lin",
        "e00_999_018.lin",
        "e00_999_019.lin",
        "e00_999_020.lin",
        "e00_999_021.lin",
        "e00_999_022.lin",
        "e00_999_023.lin",
        "e00_999_024.lin",
    ],
    chapitre1: [
        "e01_000_001.lin",
        "e01_000_002.lin",
        "e01_000_003.lin",
        "e01_000_004.lin",
        "e01_000_005.lin",
        "e01_000_006.lin",
        "e01_000_007.lin",
        "e01_000_008.lin",
        "e01_000_009.lin",
        "e01_000_011.lin",
        "e01_000_100.lin",
        "e01_000_101.lin",
        "e01_000_102.lin",
        "e01_000_104.lin",
        "e01_000_143.lin",
        "e01_001_100.lin",
        "e01_001_101.lin",
        "e01_001_102.lin",
        "e01_001_104.lin",
        "e01_002_100.lin",
        "e01_002_101.lin",
        "e01_002_104.lin",
        "e01_003_102.lin",
        "e01_004_100.lin",
        "e01_004_101.lin",
        "e01_004_102.lin",
        "e01_005_143.lin",
        "e01_006_001.lin",
        "e01_006_104.lin",
        "e01_007_104.lin",
        "e01_007_109.lin",
        "e01_007_116.lin",
        "e01_007_118.lin",
        "e01_007_119.lin",
        "e01_008_104.lin",
        "e01_008_140.lin",
        "e01_009_104.lin",
        "e01_009_143.lin",
        "e01_010_100.lin",
        "e01_010_101.lin",
        "e01_010_104.lin",
        "e01_011_102.lin",
        "e01_012_102.lin",
        "e01_012_104.lin",
        "e01_012_106.lin",
        "e01_012_108.lin",
        "e01_012_114.lin",
        "e01_012_115.lin",
        "e01_013_104.lin",
        "e01_013_107.lin",
        "e01_013_110.lin",
        "e01_013_113.lin",
        "e01_014_100.lin",
        "e01_014_104.lin",
        "e01_015_005.lin",
        "e01_015_006.lin",
        "e01_015_008.lin",
        "e01_016_005.lin",
        "e01_016_006.lin",
        "e01_016_008.lin",
        "e01_017_005.lin",
        "e01_017_006.lin",
        "e01_017_008.lin",
        "e01_017_011.lin",
        "e01_018_006.lin",
        "e01_018_100.lin",
        "e01_100_001.lin",
        "e01_100_002.lin",
        "e01_100_003.lin",
        "e01_100_004.lin",
        "e01_100_005.lin",
        "e01_100_007.lin",
        "e01_100_008.lin",
        "e01_100_009.lin",
        "e01_100_011.lin",
        "e01_100_019.lin",
        "e01_100_100.lin",
        "e01_100_101.lin",
        "e01_100_102.lin",
        "e01_100_108.lin",
        "e01_100_143.lin",
        "e01_101_140.lin",
        "e01_102_144.lin",
        "e01_102_200.lin",
        "e01_201_000.lin",
        "e01_202_000.lin",
        "e01_202_001.lin",
        "e01_203_000.lin",
        "e01_204_000.lin",
        "e01_204_001.lin",
        "e01_205_000.lin",
        "e01_206_000.lin",
        "e01_206_001.lin",
        "e01_207_000.lin",
        "e01_208_000.lin",
        "e01_208_001.lin",
        "e01_209_000.lin",
        "e01_210_000.lin",
        "e01_210_001.lin",
        "e01_211_000.lin",
        "e01_212_000.lin",
        "e01_212_001.lin",
        "e01_213_000.lin",
        "e01_214_000.lin",
        "e01_214_001.lin",
        "e01_215_000.lin",
        "e01_216_000.lin",
        "e01_216_001.lin",
        "e01_217_000.lin",
        "e01_218_000.lin",
        "e01_219_000.lin",
        "e01_220_000.lin",
        "e01_221_000.lin",
        "e01_222_000.lin",
        "e01_222_001.lin",
        "e01_223_000.lin",
        "e01_224_000.lin",
        "e01_224_001.lin",
        "e01_225_000.lin",
        "e01_226_000.lin",
        "e01_226_001.lin",
        "e01_227_000.lin",
        "e01_228_000.lin",
        "e01_228_001.lin",
        "e01_229_000.lin",
        "e01_230_000.lin",
        "e01_231_000.lin",
        "e01_232_000.lin",
        "e01_233_000.lin",
        "e01_234_000.lin",
        "e01_235_000.lin",
        "e01_250_000.lin",
        "e01_251_000.lin",
        "e01_252_000.lin",
        "e01_253_000.lin",
        "e01_254_000.lin",
        "e01_255_000.lin",
        "e01_256_000.lin",
        "e01_257_000.lin",
        "e01_259_000.lin",
        "e01_296_000.lin",
        "e01_297_000.lin",
        "e01_299_000.lin",
        "e01_300_200.lin",
        "e01_301_100.lin",
        "e01_301_143.lin",
        "e01_301_200.lin",
        "e01_999_001.lin",
        "e01_999_002.lin",
        "e01_999_008.lin",
        "e01_999_010.lin",
        "e01_999_013.lin",
        "e01_999_014.lin",
        "e01_999_015.lin",
        "e01_999_016.lin",
        "e01_999_017.lin",
        "e01_999_018.lin",
        "e01_999_019.lin",
        "e01_999_020.lin",
        "e01_999_021.lin",
        "e01_999_022.lin",
        "e01_999_023.lin",
        "e01_999_024.lin",
        "e01_999_025.lin",
        "e01_999_026.lin",
        "e01_999_027.lin",
        "e01_999_028.lin",
        "e01_999_031.lin",
        "e01_999_035.lin",
        "e01_999_036.lin",
        "e01_999_037.lin",
        "e01_999_038.lin",
        "e01_999_039.lin",
        "e01_999_041.lin",
        "e01_999_042.lin",
        "e01_999_046.lin",
        "e01_999_048.lin",
        "e01_999_049.lin",
        "e01_999_050.lin",
        "e01_999_051.lin",
        "e01_999_052.lin",
        "e01_999_053.lin",
        "e01_999_054.lin",
        "e01_999_055.lin",
        "e01_999_056.lin",
        "e01_999_057.lin",
        "e01_999_058.lin",
        "e01_999_059.lin",
        "e01_999_060.lin",
        "e01_999_061.lin",
        "e01_999_062.lin",
        "e01_999_063.lin",
        "e01_999_064.lin",
        "e01_999_065.lin",
        "e01_999_066.lin",
        "e01_999_067.lin",
        "e01_999_068.lin",
        "e01_999_070.lin",
        "e01_999_072.lin",
        "e01_999_073.lin",
        "e01_999_074.lin",
        "e01_999_077.lin",
        "e01_999_078.lin",
        "e01_999_079.lin",
        "e01_999_081.lin",
        "e01_999_082.lin",
        "e01_999_083.lin",
        "e01_999_084.lin",
        "e01_999_085.lin",
        "e01_999_086.lin",
        "e01_999_088.lin",
        "e01_999_099.lin",
    ],
    chapitre2: [
        "e02_000_001.lin",
        "e02_000_002.lin",
        "e02_000_003.lin",
        "e02_000_004.lin",
        "e02_000_005.lin",
        "e02_000_006.lin",
        "e02_000_008.lin",
        "e02_000_009.lin",
        "e02_000_011.lin",
        "e02_000_019.lin",
        "e02_000_021.lin",
        "e02_000_022.lin",
        "e02_000_023.lin",
        "e02_000_024.lin",
        "e02_000_026.lin",
        "e02_000_028.lin",
        "e02_000_030.lin",
        "e02_000_100.lin",
        "e02_000_101.lin",
        "e02_000_102.lin",
        "e02_000_104.lin",
        "e02_000_143.lin",
        "e02_000_144.lin",
        "e02_000_145.lin",
        "e02_001_102.lin",
        "e02_001_104.lin",
        "e02_001_141.lin",
        "e02_002_020.lin",
        "e02_002_021.lin",
        "e02_002_022.lin",
        "e02_002_023.lin",
        "e02_002_024.lin",
        "e02_002_025.lin",
        "e02_002_026.lin",
        "e02_002_030.lin",
        "e02_003_030.lin",
        "e02_003_104.lin",
        "e02_004_100.lin",
        "e02_004_101.lin",
        "e02_004_104.lin",
        "e02_005_102.lin",
        "e02_006_104.lin",
        "e02_007_104.lin",
        "e02_008_100.lin",
        "e02_008_104.lin",
        "e02_009_104.lin",
        "e02_009_143.lin",
        "e02_010_005.lin",
        "e02_010_100.lin",
        "e02_010_101.lin",
        "e02_010_102.lin",
        "e02_010_104.lin",
        "e02_011_006.lin",
        "e02_012_104.lin",
        "e02_012_107.lin",
        "e02_012_110.lin",
        "e02_012_118.lin",
        "e02_013_104.lin",
        "e02_013_114.lin",
        "e02_014_019.lin",
        "e02_014_100.lin",
        "e02_014_101.lin",
        "e02_014_102.lin",
        "e02_014_104.lin",
        "e02_015_143.lin",
        "e02_017_143.lin",
        "e02_018_100.lin",
        "e02_018_101.lin",
        "e02_018_104.lin",
        "e02_019_102.lin",
        "e02_020_104.lin",
        "e02_020_112.lin",
        "e02_020_113.lin",
        "e02_020_114.lin",
        "e02_021_003.lin",
        "e02_021_019.lin",
        "e02_021_020.lin",
        "e02_021_022.lin",
        "e02_021_104.lin",
        "e02_021_141.lin",
        "e02_022_022.lin",
        "e02_022_023.lin",
        "e02_023_025.lin",
        "e02_100_026.lin",
        "e02_100_028.lin",
        "e02_100_029.lin",
        "e02_101_143.lin",
        "e02_102_143.lin",
        "e02_103_143.lin",
        "e02_104_019.lin",
        "e02_104_141.lin",
        "e02_104_143.lin",
        "e02_105_002.lin",
        "e02_105_019.lin",
        "e02_105_100.lin",
        "e02_105_101.lin",
        "e02_105_102.lin",
        "e02_106_002.lin",
        "e02_106_021.lin",
        "e02_106_022.lin",
        "e02_106_025.lin",
        "e02_106_100.lin",
        "e02_106_116.lin",
        "e02_106_143.lin",
        "e02_107_026.lin",
        "e02_107_028.lin",
        "e02_107_029.lin",
        "e02_109_144.lin",
        "e02_109_201.lin",
        "e02_150_000.lin",
        "e02_150_250.lin",
        "e02_150_251.lin",
        "e02_150_252.lin",
        "e02_151_252.lin",
        "e02_160_000.lin",
        "e02_160_250.lin",
        "e02_160_251.lin",
        "e02_160_252.lin",
        "e02_160_253.lin",
        "e02_161_254.lin",
        "e02_162_000.lin",
        "e02_162_255.lin",
        "e02_163_000.lin",
        "e02_163_256.lin",
        "e02_170_000.lin",
        "e02_170_256.lin",
        "e02_171_000.lin",
        "e02_171_256.lin",
        "e02_201_000.lin",
        "e02_202_000.lin",
        "e02_203_000.lin",
        "e02_203_001.lin",
        "e02_204_000.lin",
        "e02_205_000.lin",
        "e02_205_001.lin",
        "e02_206_000.lin",
        "e02_207_000.lin",
        "e02_207_001.lin",
        "e02_208_000.lin",
        "e02_209_000.lin",
        "e02_209_001.lin",
        "e02_210_000.lin",
        "e02_212_000.lin",
        "e02_213_000.lin",
        "e02_213_001.lin",
        "e02_214_000.lin",
        "e02_215_000.lin",
        "e02_215_001.lin",
        "e02_216_000.lin",
        "e02_217_000.lin",
        "e02_217_001.lin",
        "e02_218_000.lin",
        "e02_219_000.lin",
        "e02_220_000.lin",
        "e02_221_000.lin",
        "e02_222_000.lin",
        "e02_223_000.lin",
        "e02_223_001.lin",
        "e02_224_000.lin",
        "e02_225_000.lin",
        "e02_225_001.lin",
        "e02_226_000.lin",
        "e02_227_000.lin",
        "e02_228_000.lin",
        "e02_229_000.lin",
        "e02_230_000.lin",
        "e02_231_000.lin",
        "e02_232_000.lin",
        "e02_233_000.lin",
        "e02_250_000.lin",
        "e02_251_000.lin",
        "e02_252_000.lin",
        "e02_253_000.lin",
        "e02_296_000.lin",
        "e02_297_000.lin",
        "e02_299_000.lin",
        "e02_300_201.lin",
        "e02_301_143.lin",
        "e02_301_201.lin",
        "e02_999_001.lin",
        "e02_999_002.lin",
        "e02_999_003.lin",
        "e02_999_004.lin",
        "e02_999_005.lin",
        "e02_999_006.lin",
        "e02_999_007.lin",
        "e02_999_008.lin",
        "e02_999_009.lin",
        "e02_999_010.lin",
        "e02_999_011.lin",
        "e02_999_012.lin",
        "e02_999_013.lin",
        "e02_999_014.lin",
        "e02_999_015.lin",
        "e02_999_016.lin",
        "e02_999_017.lin",
        "e02_999_018.lin",
        "e02_999_019.lin",
        "e02_999_020.lin",
        "e02_999_021.lin",
        "e02_999_022.lin",
        "e02_999_023.lin",
        "e02_999_099.lin",
        "e02_999_100.lin",
        "e02_999_101.lin",
        "e02_999_102.lin",
        "e02_999_103.lin",
        "e02_999_106.lin",
        "e02_999_108.lin",
        "e02_999_110.lin",
        "e02_999_111.lin",
        "e02_999_112.lin",
        "e02_999_113.lin",
        "e02_999_114.lin",
        "e02_999_115.lin",
        "e02_999_116.lin",
        "e02_999_117.lin",
        "e02_999_118.lin",
        "e02_999_119.lin",
        "e02_999_120.lin",
        "e02_999_121.lin",
        "e02_999_122.lin",
        "e02_999_123.lin",
        "e02_999_124.lin",
        "e02_999_125.lin",
        "e02_999_126.lin",
        "e02_999_127.lin",
        "e02_999_128.lin",
        "e02_999_129.lin",
        "e02_999_130.lin",
        "e02_999_131.lin",
        "e02_999_132.lin",
        "e02_999_133.lin",
        "e02_999_134.lin",
        "e02_999_135.lin",
        "e02_999_136.lin",
        "e02_999_137.lin",
        "e02_999_138.lin",
        "e02_999_139.lin",
        "e02_999_141.lin",
        "e02_999_142.lin",
        "e02_999_143.lin",
    ],
    chapitre3: [
        "e03_000_001.lin",
        "e03_000_002.lin",
        "e03_000_003.lin",
        "e03_000_004.lin",
        "e03_000_021.lin",
        "e03_000_022.lin",
        "e03_000_023.lin",
        "e03_000_024.lin",
        "e03_000_026.lin",
        "e03_000_030.lin",
        "e03_000_041.lin",
        "e03_000_042.lin",
        "e03_000_043.lin",
        "e03_000_044.lin",
        "e03_000_046.lin",
        "e03_000_047.lin",
        "e03_000_053.lin",
        "e03_000_055.lin",
        "e03_000_056.lin",
        "e03_000_059.lin",
        "e03_000_060.lin",
        "e03_000_061.lin",
        "e03_000_062.lin",
        "e03_000_063.lin",
        "e03_000_064.lin",
        "e03_000_100.lin",
        "e03_000_101.lin",
        "e03_000_102.lin",
        "e03_000_104.lin",
        "e03_000_140.lin",
        "e03_000_143.lin",
        "e03_000_144.lin",
        "e03_001_100.lin",
        "e03_001_101.lin",
        "e03_001_102.lin",
        "e03_001_104.lin",
        "e03_002_102.lin",
        "e03_003_019.lin",
        "e03_003_140.lin",
        "e03_004_040.lin",
        "e03_004_041.lin",
        "e03_004_042.lin",
        "e03_004_044.lin",
        "e03_004_046.lin",
        "e03_004_047.lin",
        "e03_004_053.lin",
        "e03_004_055.lin",
        "e03_005_055.lin",
        "e03_005_056.lin",
        "e03_005_059.lin",
        "e03_006_100.lin",
        "e03_007_100.lin",
        "e03_007_101.lin",
        "e03_007_104.lin",
        "e03_008_102.lin",
        "e03_009_047.lin",
        "e03_009_104.lin",
        "e03_010_104.lin",
        "e03_010_115.lin",
        "e03_010_117.lin",
        "e03_011_001.lin",
        "e03_011_003.lin",
        "e03_011_100.lin",
        "e03_011_101.lin",
        "e03_011_104.lin",
        "e03_012_102.lin",
        "e03_013_104.lin",
        "e03_013_106.lin",
        "e03_013_113.lin",
        "e03_013_117.lin",
        "e03_014_104.lin",
        "e03_014_107.lin",
        "e03_014_110.lin",
        "e03_015_046.lin",
        "e03_015_104.lin",
        "e03_016_019.lin",
        "e03_016_040.lin",
        "e03_016_047.lin",
        "e03_016_048.lin",
        "e03_017_001.lin",
        "e03_018_100.lin",
        "e03_018_101.lin",
        "e03_018_104.lin",
        "e03_019_102.lin",
        "e03_020_055.lin",
        "e03_021_056.lin",
        "e03_021_060.lin",
        "e03_021_061.lin",
        "e03_021_062.lin",
        "e03_021_063.lin",
        "e03_022_055.lin",
        "e03_022_104.lin",
        "e03_023_055.lin",
        "e03_023_056.lin",
        "e03_023_060.lin",
        "e03_023_062.lin",
        "e03_023_104.lin",
        "e03_024_055.lin",
        "e03_024_056.lin",
        "e03_024_060.lin",
        "e03_024_061.lin",
        "e03_024_062.lin",
        "e03_025_055.lin",
        "e03_025_056.lin",
        "e03_025_060.lin",
        "e03_025_061.lin",
        "e03_025_062.lin",
        "e03_025_104.lin",
        "e03_026_055.lin",
        "e03_026_056.lin",
        "e03_026_104.lin",
        "e03_027_055.lin",
        "e03_027_056.lin",
        "e03_027_061.lin",
        "e03_028_040.lin",
        "e03_028_046.lin",
        "e03_029_040.lin",
        "e03_029_044.lin",
        "e03_029_049.lin",
        "e03_030_046.lin",
        "e03_100_042.lin",
        "e03_100_043.lin",
        "e03_100_044.lin",
        "e03_100_045.lin",
        "e03_100_050.lin",
        "e03_100_051.lin",
        "e03_100_054.lin",
        "e03_100_055.lin",
        "e03_100_056.lin",
        "e03_100_064.lin",
        "e03_102_144.lin",
        "e03_102_202.lin",
        "e03_201_000.lin",
        "e03_202_000.lin",
        "e03_202_001.lin",
        "e03_203_000.lin",
        "e03_204_000.lin",
        "e03_204_001.lin",
        "e03_205_000.lin",
        "e03_206_000.lin",
        "e03_207_000.lin",
        "e03_208_000.lin",
        "e03_209_000.lin",
        "e03_210_000.lin",
        "e03_210_001.lin",
        "e03_211_000.lin",
        "e03_212_000.lin",
        "e03_212_001.lin",
        "e03_213_000.lin",
        "e03_214_000.lin",
        "e03_214_001.lin",
        "e03_215_000.lin",
        "e03_216_000.lin",
        "e03_217_000.lin",
        "e03_218_000.lin",
        "e03_218_001.lin",
        "e03_219_000.lin",
        "e03_220_000.lin",
        "e03_220_001.lin",
        "e03_221_000.lin",
        "e03_222_000.lin",
        "e03_223_000.lin",
        "e03_224_000.lin",
        "e03_225_000.lin",
        "e03_226_000.lin",
        "e03_227_000.lin",
        "e03_228_000.lin",
        "e03_229_000.lin",
        "e03_230_000.lin",
        "e03_230_001.lin",
        "e03_231_000.lin",
        "e03_232_000.lin",
        "e03_233_000.lin",
        "e03_233_001.lin",
        "e03_234_000.lin",
        "e03_235_000.lin",
        "e03_235_001.lin",
        "e03_236_000.lin",
        "e03_237_000.lin",
        "e03_238_000.lin",
        "e03_239_000.lin",
        "e03_240_000.lin",
        "e03_250_000.lin",
        "e03_296_000.lin",
        "e03_297_000.lin",
        "e03_299_000.lin",
        "e03_300_202.lin",
        "e03_301_001.lin",
        "e03_301_143.lin",
        "e03_301_144.lin",
        "e03_301_202.lin",
        "e03_999_001.lin",
        "e03_999_002.lin",
        "e03_999_008.lin",
        "e03_999_009.lin",
        "e03_999_010.lin",
        "e03_999_013.lin",
        "e03_999_014.lin",
        "e03_999_015.lin",
        "e03_999_016.lin",
        "e03_999_017.lin",
        "e03_999_018.lin",
        "e03_999_019.lin",
        "e03_999_020.lin",
        "e03_999_021.lin",
        "e03_999_022.lin",
        "e03_999_023.lin",
        "e03_999_024.lin",
        "e03_999_025.lin",
        "e03_999_026.lin",
        "e03_999_027.lin",
        "e03_999_028.lin",
        "e03_999_031.lin",
        "e03_999_041.lin",
        "e03_999_042.lin",
        "e03_999_050.lin",
        "e03_999_051.lin",
        "e03_999_052.lin",
        "e03_999_053.lin",
        "e03_999_054.lin",
        "e03_999_056.lin",
        "e03_999_057.lin",
        "e03_999_058.lin",
        "e03_999_061.lin",
        "e03_999_062.lin",
        "e03_999_063.lin",
        "e03_999_064.lin",
        "e03_999_065.lin",
        "e03_999_066.lin",
        "e03_999_067.lin",
        "e03_999_068.lin",
        "e03_999_076.lin",
        "e03_999_078.lin",
        "e03_999_079.lin",
        "e03_999_080.lin",
        "e03_999_081.lin",
        "e03_999_082.lin",
        "e03_999_083.lin",
        "e03_999_084.lin",
        "e03_999_085.lin",
        "e03_999_086.lin",
        "e03_999_088.lin",
        "e03_999_091.lin",
        "e03_999_092.lin",
        "e03_999_095.lin",
        "e03_999_096.lin",
        "e03_999_097.lin",
        "e03_999_099.lin",
        "e03_999_106.lin",
        "e03_999_107.lin",
        "e03_999_108.lin",
        "e03_999_111.lin",
        "e03_999_115.lin",
        "e03_999_119.lin",
        "e03_999_120.lin",
        "e03_999_121.lin",
        "e03_999_122.lin",
        "e03_999_124.lin",
        "e03_999_127.lin",
        "e03_999_128.lin",
        "e03_999_129.lin",
        "e03_999_130.lin",
        "e03_999_131.lin",
        "e03_999_132.lin",
        "e03_999_133.lin",
        "e03_999_134.lin",
        "e03_999_135.lin",
        "e03_999_136.lin",
        "e03_999_137.lin",
        "e03_999_138.lin",
        "e03_999_139.lin",
        "e03_999_140.lin",
        "e03_999_141.lin",
        "e03_999_142.lin",
        "e03_999_143.lin",
        "e03_999_151.lin",
        "e03_999_152.lin",
        "e03_999_153.lin",
        "e03_999_154.lin",
    ],
    chapitre4: [
        "e04_000_001.lin",
        "e04_000_002.lin",
        "e04_000_003.lin",
        "e04_000_004.lin",
        "e04_000_071.lin",
        "e04_000_072.lin",
        "e04_000_073.lin",
        "e04_000_074.lin",
        "e04_000_075.lin",
        "e04_000_076.lin",
        "e04_000_079.lin",
        "e04_000_080.lin",
        "e04_000_081.lin",
        "e04_000_082.lin",
        "e04_000_083.lin",
        "e04_000_084.lin",
        "e04_000_086.lin",
        "e04_000_087.lin",
        "e04_000_091.lin",
        "e04_000_097.lin",
        "e04_000_100.lin",
        "e04_000_101.lin",
        "e04_000_102.lin",
        "e04_000_104.lin",
        "e04_000_130.lin",
        "e04_000_132.lin",
        "e04_000_133.lin",
        "e04_000_135.lin",
        "e04_001_001.lin",
        "e04_002_100.lin",
        "e04_002_102.lin",
        "e04_002_141.lin",
        "e04_003_070.lin",
        "e04_003_130.lin",
        "e04_003_132.lin",
        "e04_003_133.lin",
        "e04_003_135.lin",
        "e04_004_132.lin",
        "e04_004_135.lin",
        "e04_005_071.lin",
        "e04_005_072.lin",
        "e04_005_074.lin",
        "e04_005_087.lin",
        "e04_006_071.lin",
        "e04_006_079.lin",
        "e04_007_091.lin",
        "e04_008_071.lin",
        "e04_008_079.lin",
        "e04_008_087.lin",
        "e04_009_079.lin",
        "e04_009_084.lin",
        "e04_010_079.lin",
        "e04_010_084.lin",
        "e04_013_079.lin",
        "e04_013_084.lin",
        "e04_014_079.lin",
        "e04_014_084.lin",
        "e04_015_091.lin",
        "e04_016_079.lin",
        "e04_018_071.lin",
        "e04_018_079.lin",
        "e04_018_084.lin",
        "e04_019_079.lin",
        "e04_019_084.lin",
        "e04_100_079.lin",
        "e04_100_091.lin",
        "e04_100_093.lin",
        "e04_101_071.lin",
        "e04_103_096.lin",
        "e04_104_096.lin",
        "e04_104_097.lin",
        "e04_105_079.lin",
        "e04_106_091.lin",
        "e04_107_079.lin",
        "e04_107_091.lin",
        "e04_107_095.lin",
        "e04_108_071.lin",
        "e04_108_088.lin",
        "e04_108_089.lin",
        "e04_109_090.lin",
        "e04_109_203.lin",
        "e04_201_000.lin",
        "e04_202_000.lin",
        "e04_202_001.lin",
        "e04_203_000.lin",
        "e04_204_000.lin",
        "e04_204_001.lin",
        "e04_205_000.lin",
        "e04_206_000.lin",
        "e04_206_001.lin",
        "e04_207_000.lin",
        "e04_208_000.lin",
        "e04_208_001.lin",
        "e04_209_000.lin",
        "e04_210_000.lin",
        "e04_211_000.lin",
        "e04_212_000.lin",
        "e04_213_000.lin",
        "e04_213_001.lin",
        "e04_214_000.lin",
        "e04_215_000.lin",
        "e04_216_000.lin",
        "e04_217_000.lin",
        "e04_217_001.lin",
        "e04_218_000.lin",
        "e04_219_000.lin",
        "e04_220_000.lin",
        "e04_221_000.lin",
        "e04_222_000.lin",
        "e04_223_000.lin",
        "e04_223_001.lin",
        "e04_224_000.lin",
        "e04_225_000.lin",
        "e04_225_001.lin",
        "e04_226_000.lin",
        "e04_227_000.lin",
        "e04_227_001.lin",
        "e04_228_000.lin",
        "e04_229_000.lin",
        "e04_229_001.lin",
        "e04_230_000.lin",
        "e04_231_000.lin",
        "e04_232_000.lin",
        "e04_233_000.lin",
        "e04_233_001.lin",
        "e04_234_000.lin",
        "e04_235_000.lin",
        "e04_236_000.lin",
        "e04_237_000.lin",
        "e04_238_000.lin",
        "e04_239_000.lin",
        "e04_240_000.lin",
        "e04_241_000.lin",
        "e04_241_001.lin",
        "e04_242_000.lin",
        "e04_243_000.lin",
        "e04_244_000.lin",
        "e04_245_000.lin",
        "e04_245_001.lin",
        "e04_246_000.lin",
        "e04_247_000.lin",
        "e04_248_000.lin",
        "e04_249_000.lin",
        "e04_250_000.lin",
        "e04_296_000.lin",
        "e04_297_000.lin",
        "e04_299_000.lin",
        "e04_300_203.lin",
        "e04_301_105.lin",
        "e04_301_143.lin",
        "e04_301_150.lin",
        "e04_301_203.lin",
        "e04_999_001.lin",
        "e04_999_002.lin",
        "e04_999_003.lin",
        "e04_999_004.lin",
        "e04_999_005.lin",
        "e04_999_006.lin",
        "e04_999_007.lin",
        "e04_999_008.lin",
        "e04_999_009.lin",
        "e04_999_015.lin",
        "e04_999_016.lin",
        "e04_999_017.lin",
        "e04_999_018.lin",
        "e04_999_019.lin",
        "e04_999_099.lin",
        "e04_999_100.lin",
        "e04_999_101.lin",
        "e04_999_102.lin",
        "e04_999_103.lin",
        "e04_999_106.lin",
        "e04_999_108.lin",
        "e04_999_111.lin",
        "e04_999_112.lin",
        "e04_999_113.lin",
        "e04_999_114.lin",
        "e04_999_116.lin",
        "e04_999_117.lin",
        "e04_999_118.lin",
        "e04_999_119.lin",
        "e04_999_136.lin",
        "e04_999_137.lin",
        "e04_999_138.lin",
        "e04_999_139.lin",
        "e04_999_140.lin",
        "e04_999_141.lin",
        "e04_999_142.lin",
        "e04_999_143.lin",
        "e04_999_144.lin",
        "e04_999_145.lin",
        "e04_999_146.lin",
        "e04_999_147.lin",
        "e04_999_148.lin",
        "e04_999_149.lin",
        "e04_999_150.lin",
        "e04_999_151.lin",
        "e04_999_152.lin",
        "e04_999_153.lin",
        "e04_999_154.lin",
        "e04_999_155.lin",
        "e04_999_156.lin",
        "e04_999_157.lin",
        "e04_999_158.lin",
        "e04_999_159.lin",
        "e04_999_160.lin",
        "e04_999_161.lin",
        "e04_999_162.lin",
        "e04_999_163.lin",
        "e04_999_164.lin",
        "e04_999_165.lin",
        "e04_999_166.lin",
    ],
    chapitre5: [
        "e05_000_001.lin",
        "e05_000_002.lin",
        "e05_000_003.lin",
        "e05_000_004.lin",
        "e05_000_021.lin",
        "e05_000_022.lin",
        "e05_000_023.lin",
        "e05_000_024.lin",
        "e05_000_026.lin",
        "e05_000_030.lin",
        "e05_000_041.lin",
        "e05_000_042.lin",
        "e05_000_044.lin",
        "e05_000_046.lin",
        "e05_000_047.lin",
        "e05_000_053.lin",
        "e05_000_055.lin",
        "e05_000_063.lin",
        "e05_000_064.lin",
        "e05_000_100.lin",
        "e05_000_101.lin",
        "e05_000_102.lin",
        "e05_000_104.lin",
        "e05_000_105.lin",
        "e05_000_130.lin",
        "e05_000_131.lin",
        "e05_000_132.lin",
        "e05_000_133.lin",
        "e05_000_134.lin",
        "e05_000_135.lin",
        "e05_000_143.lin",
        "e05_000_144.lin",
        "e05_000_161.lin",
        "e05_000_162.lin",
        "e05_000_163.lin",
        "e05_000_164.lin",
        "e05_000_165.lin",
        "e05_000_166.lin",
        "e05_000_167.lin",
        "e05_000_168.lin",
        "e05_000_170.lin",
        "e05_000_171.lin",
        "e05_001_102.lin",
        "e05_002_160.lin",
        "e05_002_161.lin",
        "e05_002_162.lin",
        "e05_002_163.lin",
        "e05_002_166.lin",
        "e05_002_170.lin",
        "e05_002_171.lin",
        "e05_003_160.lin",
        "e05_003_171.lin",
        "e05_004_100.lin",
        "e05_004_101.lin",
        "e05_004_104.lin",
        "e05_005_101.lin",
        "e05_005_104.lin",
        "e05_006_102.lin",
        "e05_007_019.lin",
        "e05_007_020.lin",
        "e05_007_100.lin",
        "e05_007_101.lin",
        "e05_007_102.lin",
        "e05_007_140.lin",
        "e05_008_030.lin",
        "e05_009_104.lin",
        "e05_010_104.lin",
        "e05_010_111.lin",
        "e05_010_112.lin",
        "e05_011_100.lin",
        "e05_011_104.lin",
        "e05_012_101.lin",
        "e05_013_100.lin",
        "e05_013_101.lin",
        "e05_013_104.lin",
        "e05_014_030.lin",
        "e05_014_070.lin",
        "e05_014_100.lin",
        "e05_014_102.lin",
        "e05_014_133.lin",
        "e05_015_100.lin",
        "e05_015_104.lin",
        "e05_015_130.lin",
        "e05_015_131.lin",
        "e05_016_100.lin",
        "e05_016_101.lin",
        "e05_016_104.lin",
        "e05_017_102.lin",
        "e05_018_070.lin",
        "e05_018_130.lin",
        "e05_018_132.lin",
        "e05_018_133.lin",
        "e05_018_134.lin",
        "e05_018_135.lin",
        "e05_019_040.lin",
        "e05_019_070.lin",
        "e05_019_140.lin",
        "e05_019_143.lin",
        "e05_019_144.lin",
        "e05_019_160.lin",
        "e05_019_161.lin",
        "e05_020_162.lin",
        "e05_020_164.lin",
        "e05_021_162.lin",
        "e05_021_164.lin",
        "e05_021_165.lin",
        "e05_022_162.lin",
        "e05_022_172.lin",
        "e05_023_162.lin",
        "e05_023_167.lin",
        "e05_100_167.lin",
        "e05_100_168.lin",
        "e05_101_041.lin",
        "e05_101_100.lin",
        "e05_101_131.lin",
        "e05_101_161.lin",
        "e05_101_164.lin",
        "e05_101_167.lin",
        "e05_102_105.lin",
        "e05_104_144.lin",
        "e05_104_204.lin",
        "e05_201_000.lin",
        "e05_202_000.lin",
        "e05_202_001.lin",
        "e05_203_000.lin",
        "e05_204_000.lin",
        "e05_204_001.lin",
        "e05_205_000.lin",
        "e05_206_000.lin",
        "e05_206_001.lin",
        "e05_207_000.lin",
        "e05_208_000.lin",
        "e05_209_000.lin",
        "e05_210_000.lin",
        "e05_211_000.lin",
        "e05_212_000.lin",
        "e05_212_001.lin",
        "e05_213_000.lin",
        "e05_214_000.lin",
        "e05_214_001.lin",
        "e05_215_000.lin",
        "e05_216_000.lin",
        "e05_216_001.lin",
        "e05_217_000.lin",
        "e05_218_000.lin",
        "e05_219_000.lin",
        "e05_220_000.lin",
        "e05_221_000.lin",
        "e05_222_000.lin",
        "e05_223_000.lin",
        "e05_224_000.lin",
        "e05_225_000.lin",
        "e05_226_000.lin",
        "e05_226_001.lin",
        "e05_227_000.lin",
        "e05_228_000.lin",
        "e05_229_000.lin",
        "e05_230_000.lin",
        "e05_231_000.lin",
        "e05_232_000.lin",
        "e05_233_000.lin",
        "e05_234_000.lin",
        "e05_235_000.lin",
        "e05_236_000.lin",
        "e05_237_000.lin",
        "e05_238_000.lin",
        "e05_239_000.lin",
        "e05_240_000.lin",
        "e05_240_001.lin",
        "e05_241_000.lin",
        "e05_242_000.lin",
        "e05_242_001.lin",
        "e05_243_000.lin",
        "e05_296_000.lin",
        "e05_297_000.lin",
        "e05_299_000.lin",
        "e05_300_204.lin",
        "e05_301_104.lin",
        "e05_301_204.lin",
        "e05_302_104.lin",
        "e05_303_104.lin",
        "e05_304_100.lin",
        "e05_304_101.lin",
        "e05_304_104.lin",
        "e05_305_100.lin",
        "e05_305_101.lin",
        "e05_305_102.lin",
        "e05_307_030.lin",
        "e05_307_211.lin",
        "e05_999_001.lin",
        "e05_999_002.lin",
        "e05_999_003.lin",
        "e05_999_004.lin",
        "e05_999_005.lin",
        "e05_999_006.lin",
        "e05_999_007.lin",
        "e05_999_008.lin",
        "e05_999_009.lin",
        "e05_999_010.lin",
        "e05_999_011.lin",
        "e05_999_012.lin",
        "e05_999_013.lin",
        "e05_999_014.lin",
        "e05_999_015.lin",
        "e05_999_016.lin",
        "e05_999_099.lin",
        "e05_999_100.lin",
        "e05_999_101.lin",
        "e05_999_102.lin",
        "e05_999_103.lin",
        "e05_999_105.lin",
        "e05_999_106.lin",
        "e05_999_107.lin",
        "e05_999_108.lin",
        "e05_999_110.lin",
        "e05_999_111.lin",
        "e05_999_112.lin",
        "e05_999_113.lin",
        "e05_999_114.lin",
        "e05_999_115.lin",
        "e05_999_116.lin",
        "e05_999_117.lin",
        "e05_999_118.lin",
        "e05_999_119.lin",
        "e05_999_120.lin",
        "e05_999_121.lin",
        "e05_999_122.lin",
        "e05_999_123.lin",
        "e05_999_124.lin",
        "e05_999_125.lin",
        "e05_999_126.lin",
        "e05_999_136.lin",
        "e05_999_137.lin",
        "e05_999_138.lin",
        "e05_999_170.lin",
        "e05_999_171.lin",
        "e05_999_172.lin",
        "e05_999_173.lin",
        "e05_999_174.lin",
        "e05_999_175.lin",
        "e05_999_176.lin",
        "e05_999_177.lin",
        "e05_999_178.lin",
        "e05_999_179.lin",
        "e05_999_180.lin",
        "e05_999_181.lin",
        "e05_999_182.lin",
        "e05_999_183.lin",
        "e05_999_184.lin",
        "e05_999_185.lin",
        "e05_999_186.lin",
        "e05_999_187.lin",
        "e05_999_188.lin",
        "e05_999_189.lin",
        "e05_999_190.lin",
        "e05_999_191.lin",
        "e05_999_192.lin",
        "e05_999_193.lin",
        "e05_999_194.lin",
        "e05_999_195.lin",
        "e05_999_196.lin",
        "e05_999_197.lin",
        "e05_999_198.lin",
        "e05_999_199.lin",
        "e05_999_200.lin",
        "e05_999_201.lin",
        "e05_999_202.lin",
        "e05_999_203.lin",
        "e05_999_204.lin",
        "e05_999_205.lin",
        "e05_999_206.lin",
        "e05_999_207.lin",
        "e05_999_208.lin",
        "e05_999_209.lin",
        "e05_999_210.lin",
        "e05_999_211.lin",
        "e05_999_212.lin",
        "e05_999_213.lin",
        "e05_999_214.lin",
        "e05_999_215.lin",
        "e05_999_216.lin",
        "e05_999_217.lin",
        "e05_999_218.lin",
        "e05_999_219.lin",
        "e05_999_220.lin",
        "e05_999_222.lin",
    ],
    chapitre6: [
        "e06_001_001.lin",
        "e06_100_260.lin",
        "e06_100_265.lin",
        "e06_101_267.lin",
        "e06_102_264.lin",
        "e06_102_273.lin",
        "e06_102_274.lin",
        "e06_102_275.lin",
        "e06_102_276.lin",
        "e06_103_263.lin",
        "e06_103_271.lin",
        "e06_103_272.lin",
        "e06_104_262.lin",
        "e06_104_269.lin",
        "e06_105_261.lin",
        "e06_105_268.lin",
        "e06_105_270.lin",
        "e06_106_260.lin",
        "e06_106_265.lin",
        "e06_106_266.lin",
        "e06_106_267.lin",
        "e06_107_260.lin",
        "e06_108_205.lin",
        "e06_201_000.lin",
        "e06_202_000.lin",
        "e06_203_000.lin",
        "e06_204_000.lin",
        "e06_204_001.lin",
        "e06_205_000.lin",
        "e06_207_000.lin",
        "e06_208_000.lin",
        "e06_208_001.lin",
        "e06_209_000.lin",
        "e06_210_000.lin",
        "e06_211_000.lin",
        "e06_212_000.lin",
        "e06_213_000.lin",
        "e06_214_000.lin",
        "e06_214_001.lin",
        "e06_215_000.lin",
        "e06_216_000.lin",
        "e06_216_001.lin",
        "e06_217_000.lin",
        "e06_218_000.lin",
        "e06_219_000.lin",
        "e06_221_000.lin",
        "e06_222_000.lin",
        "e06_223_000.lin",
        "e06_224_000.lin",
        "e06_225_000.lin",
        "e06_226_000.lin",
        "e06_227_000.lin",
        "e06_228_000.lin",
        "e06_229_000.lin",
        "e06_229_001.lin",
        "e06_230_000.lin",
        "e06_231_000.lin",
        "e06_231_001.lin",
        "e06_232_000.lin",
        "e06_234_000.lin",
        "e06_234_001.lin",
        "e06_236_000.lin",
        "e06_237_000.lin",
        "e06_237_001.lin",
        "e06_238_000.lin",
        "e06_240_000.lin",
        "e06_240_001.lin",
        "e06_241_000.lin",
        "e06_242_000.lin",
        "e06_242_001.lin",
        "e06_244_000.lin",
        "e06_290_000.lin",
        "e06_295_000.lin",
        "e06_296_000.lin",
        "e06_297_000.lin",
        "e06_298_000.lin",
        "e06_299_000.lin",
        "e06_999_100.lin",
        "e06_999_101.lin",
        "e06_999_102.lin",
        "e06_999_103.lin",
        "e06_999_104.lin",
    ],
    epilogue: ["e07_001_001.lin"],
    FTE: {
        nagito: [
            "e08_001_000.lin",
            "e08_001_001.lin",
            "e08_001_002.lin",
            "e08_001_003.lin",
            "e08_001_004.lin",
            "e08_001_005.lin",
            "e08_001_006.lin",
            "e08_001_007.lin",
            "e08_001_008.lin",
            "e08_001_009.lin",
            "e08_001_010.lin",
            "e08_001_011.lin",
            "e08_001_012.lin",
            "e08_001_013.lin",
            "e08_001_030.lin",
            "e08_001_031.lin",
            "e08_001_032.lin",
            "e08_001_033.lin",
            "e08_001_034.lin",
            "e08_001_050.lin",
        ],
        byakuya: [
            "e08_002_000.lin",
            "e08_002_001.lin",
            "e08_002_002.lin",
            "e08_002_003.lin",
            "e08_002_004.lin",
            "e08_002_020.lin",
            "e08_002_030.lin",
            "e08_002_031.lin",
            "e08_002_032.lin",
            "e08_002_033.lin",
            "e08_002_034.lin",
            "e08_002_050.lin",
        ],
        gundham: [
            "e08_003_000.lin",
            "e08_003_001.lin",
            "e08_003_002.lin",
            "e08_003_003.lin",
            "e08_003_004.lin",
            "e08_003_005.lin",
            "e08_003_006.lin",
            "e08_003_007.lin",
            "e08_003_008.lin",
            "e08_003_009.lin",
            "e08_003_010.lin",
            "e08_003_011.lin",
            "e08_003_012.lin",
            "e08_003_013.lin",
            "e08_003_014.lin",
            "e08_003_015.lin",
            "e08_003_016.lin",
            "e08_003_017.lin",
            "e08_003_018.lin",
            "e08_003_030.lin",
            "e08_003_031.lin",
            "e08_003_032.lin",
            "e08_003_033.lin",
            "e08_003_034.lin",
            "e08_003_050.lin",
        ],
        kazuichi: [
            "e08_004_000.lin",
            "e08_004_001.lin",
            "e08_004_002.lin",
            "e08_004_003.lin",
            "e08_004_004.lin",
            "e08_004_005.lin",
            "e08_004_006.lin",
            "e08_004_007.lin",
            "e08_004_008.lin",
            "e08_004_009.lin",
            "e08_004_010.lin",
            "e08_004_011.lin",
            "e08_004_012.lin",
            "e08_004_013.lin",
            "e08_004_014.lin",
            "e08_004_015.lin",
            "e08_004_016.lin",
            "e08_004_017.lin",
            "e08_004_018.lin",
            "e08_004_019.lin",
            "e08_004_020.lin",
            "e08_004_021.lin",
            "e08_004_030.lin",
            "e08_004_031.lin",
            "e08_004_032.lin",
            "e08_004_033.lin",
            "e08_004_034.lin",
            "e08_004_050.lin",
        ],
        teruteru: [
            "e08_005_000.lin",
            "e08_005_001.lin",
            "e08_005_002.lin",
            "e08_005_003.lin",
            "e08_005_004.lin",
            "e08_005_030.lin",
            "e08_005_031.lin",
            "e08_005_032.lin",
            "e08_005_033.lin",
            "e08_005_034.lin",
            "e08_005_050.lin",
        ],
        nekomaru: [
            "e08_006_000.lin",
            "e08_006_001.lin",
            "e08_006_002.lin",
            "e08_006_003.lin",
            "e08_006_004.lin",
            "e08_006_005.lin",
            "e08_006_006.lin",
            "e08_006_007.lin",
            "e08_006_008.lin",
            "e08_006_009.lin",
            "e08_006_010.lin",
            "e08_006_011.lin",
            "e08_006_012.lin",
            "e08_006_013.lin",
            "e08_006_014.lin",
            "e08_006_015.lin",
            "e08_006_016.lin",
            "e08_006_017.lin",
            "e08_006_018.lin",
            "e08_006_030.lin",
            "e08_006_031.lin",
            "e08_006_032.lin",
            "e08_006_033.lin",
            "e08_006_034.lin",
            "e08_006_040.lin",
            "e08_006_041.lin",
            "e08_006_042.lin",
            "e08_006_043.lin",
            "e08_006_044.lin",
            "e08_006_050.lin",
            "e08_006_100.lin",
        ],
        fuyuhiko: [
            "e08_007_000.lin",
            "e08_007_001.lin",
            "e08_007_002.lin",
            "e08_007_003.lin",
            "e08_007_004.lin",
            "e08_007_005.lin",
            "e08_007_006.lin",
            "e08_007_007.lin",
            "e08_007_008.lin",
            "e08_007_009.lin",
            "e08_007_010.lin",
            "e08_007_011.lin",
            "e08_007_012.lin",
            "e08_007_013.lin",
            "e08_007_014.lin",
            "e08_007_015.lin",
            "e08_007_016.lin",
            "e08_007_017.lin",
            "e08_007_018.lin",
            "e08_007_020.lin",
            "e08_007_030.lin",
            "e08_007_031.lin",
            "e08_007_032.lin",
            "e08_007_033.lin",
            "e08_007_034.lin",
            "e08_007_050.lin",
        ],
        akane: [
            "e08_008_000.lin",
            "e08_008_001.lin",
            "e08_008_002.lin",
            "e08_008_003.lin",
            "e08_008_004.lin",
            "e08_008_005.lin",
            "e08_008_006.lin",
            "e08_008_007.lin",
            "e08_008_008.lin",
            "e08_008_009.lin",
            "e08_008_010.lin",
            "e08_008_011.lin",
            "e08_008_012.lin",
            "e08_008_013.lin",
            "e08_008_014.lin",
            "e08_008_015.lin",
            "e08_008_016.lin",
            "e08_008_017.lin",
            "e08_008_018.lin",
            "e08_008_019.lin",
            "e08_008_020.lin",
            "e08_008_021.lin",
            "e08_008_022.lin",
            "e08_008_030.lin",
            "e08_008_031.lin",
            "e08_008_032.lin",
            "e08_008_033.lin",
            "e08_008_034.lin",
            "e08_008_050.lin",
        ],
        chiaki: [
            "e08_009_000.lin",
            "e08_009_001.lin",
            "e08_009_002.lin",
            "e08_009_003.lin",
            "e08_009_004.lin",
            "e08_009_005.lin",
            "e08_009_006.lin",
            "e08_009_007.lin",
            "e08_009_008.lin",
            "e08_009_009.lin",
            "e08_009_010.lin",
            "e08_009_011.lin",
            "e08_009_012.lin",
            "e08_009_013.lin",
            "e08_009_014.lin",
            "e08_009_015.lin",
            "e08_009_016.lin",
            "e08_009_017.lin",
            "e08_009_018.lin",
            "e08_009_019.lin",
            "e08_009_020.lin",
            "e08_009_021.lin",
            "e08_009_022.lin",
            "e08_009_030.lin",
            "e08_009_031.lin",
            "e08_009_032.lin",
            "e08_009_033.lin",
            "e08_009_034.lin",
            "e08_009_050.lin",
        ],
        sonia: [
            "e08_010_000.lin",
            "e08_010_001.lin",
            "e08_010_002.lin",
            "e08_010_003.lin",
            "e08_010_004.lin",
            "e08_010_005.lin",
            "e08_010_006.lin",
            "e08_010_007.lin",
            "e08_010_008.lin",
            "e08_010_009.lin",
            "e08_010_010.lin",
            "e08_010_011.lin",
            "e08_010_012.lin",
            "e08_010_013.lin",
            "e08_010_014.lin",
            "e08_010_015.lin",
            "e08_010_016.lin",
            "e08_010_017.lin",
            "e08_010_018.lin",
            "e08_010_019.lin",
            "e08_010_020.lin",
            "e08_010_021.lin",
            "e08_010_030.lin",
            "e08_010_031.lin",
            "e08_010_032.lin",
            "e08_010_033.lin",
            "e08_010_034.lin",
            "e08_010_050.lin",
        ],
        hiyoko: [
            "e08_011_000.lin",
            "e08_011_001.lin",
            "e08_011_002.lin",
            "e08_011_003.lin",
            "e08_011_004.lin",
            "e08_011_005.lin",
            "e08_011_006.lin",
            "e08_011_007.lin",
            "e08_011_008.lin",
            "e08_011_009.lin",
            "e08_011_010.lin",
            "e08_011_011.lin",
            "e08_011_012.lin",
            "e08_011_030.lin",
            "e08_011_031.lin",
            "e08_011_032.lin",
            "e08_011_033.lin",
            "e08_011_034.lin",
            "e08_011_050.lin",
        ],
        mahiru: [
            "e08_012_000.lin",
            "e08_012_001.lin",
            "e08_012_002.lin",
            "e08_012_003.lin",
            "e08_012_004.lin",
            "e08_012_005.lin",
            "e08_012_006.lin",
            "e08_012_007.lin",
            "e08_012_008.lin",
            "e08_012_030.lin",
            "e08_012_031.lin",
            "e08_012_032.lin",
            "e08_012_033.lin",
            "e08_012_034.lin",
            "e08_012_050.lin",
        ],
        mikan: [
            "e08_013_000.lin",
            "e08_013_001.lin",
            "e08_013_002.lin",
            "e08_013_003.lin",
            "e08_013_004.lin",
            "e08_013_005.lin",
            "e08_013_006.lin",
            "e08_013_007.lin",
            "e08_013_008.lin",
            "e08_013_009.lin",
            "e08_013_010.lin",
            "e08_013_011.lin",
            "e08_013_012.lin",
            "e08_013_030.lin",
            "e08_013_031.lin",
            "e08_013_032.lin",
            "e08_013_033.lin",
            "e08_013_034.lin",
            "e08_013_050.lin",
        ],
        ibuki: [
            "e08_014_000.lin",
            "e08_014_001.lin",
            "e08_014_002.lin",
            "e08_014_003.lin",
            "e08_014_004.lin",
            "e08_014_005.lin",
            "e08_014_006.lin",
            "e08_014_007.lin",
            "e08_014_008.lin",
            "e08_014_009.lin",
            "e08_014_010.lin",
            "e08_014_011.lin",
            "e08_014_012.lin",
            "e08_014_030.lin",
            "e08_014_031.lin",
            "e08_014_032.lin",
            "e08_014_033.lin",
            "e08_014_034.lin",
            "e08_014_050.lin",
        ],
        peko: [
            "e08_015_000.lin",
            "e08_015_001.lin",
            "e08_015_002.lin",
            "e08_015_003.lin",
            "e08_015_004.lin",
            "e08_015_005.lin",
            "e08_015_006.lin",
            "e08_015_007.lin",
            "e08_015_008.lin",
            "e08_015_030.lin",
            "e08_015_031.lin",
            "e08_015_032.lin",
            "e08_015_033.lin",
            "e08_015_034.lin",
            "e08_015_050.lin",
        ],
        genericText: [
            "e08_100_000.lin",
            "e08_100_001.lin",
            "e08_100_002.lin",
            "e08_100_003.lin",
            "e08_100_004.lin",
            "e08_100_005.lin",
            "e08_100_006.lin",
            "e08_100_007.lin",
            "e08_100_008.lin",
            "e08_100_009.lin",
            "e08_100_010.lin",
            "e08_100_011.lin",
            "e08_100_012.lin",
            "e08_100_013.lin",
            "e08_100_014.lin",
            "e08_100_015.lin",
            "e08_100_016.lin",
            "e08_100_017.lin",
            "e08_150_000.lin",
            "e08_151_000.lin",
            "e08_152_000.lin",
        ]
    },
    DanganIsland: [
        "e09_000_001.lin",
        "e09_090_001.lin",
        "e09_090_100.lin",
        "e09_100_001.lin",
        "e09_100_096.lin",
        "e09_100_250.lin",
        "e09_100_251.lin",
        "e09_200_000.lin",
        "e09_201_000.lin",
        "e09_201_001.lin",
        "e09_201_002.lin",
        "e09_201_003.lin",
        "e09_300_001.lin",
        "e09_500_001.lin",
        "e09_500_002.lin",
        "e09_500_003.lin",
        "e09_600_000.lin",
        "e09_601_000.lin",
        "e09_602_000.lin",
        "e09_602_100.lin",
        "e09_701_000.lin",
        "e09_701_001.lin",
        "e09_701_002.lin",
        "e09_701_003.lin",
        "e09_701_004.lin",
        "e09_701_005.lin",
        "e09_701_100.lin",
        "e09_701_101.lin",
        "e09_701_200.lin",
        "e09_702_000.lin",
        "e09_702_001.lin",
        "e09_702_002.lin",
        "e09_702_003.lin",
        "e09_702_004.lin",
        "e09_702_005.lin",
        "e09_702_100.lin",
        "e09_702_101.lin",
        "e09_702_200.lin",
        "e09_703_000.lin",
        "e09_703_001.lin",
        "e09_703_002.lin",
        "e09_703_003.lin",
        "e09_703_004.lin",
        "e09_703_005.lin",
        "e09_703_100.lin",
        "e09_703_101.lin",
        "e09_703_200.lin",
        "e09_704_000.lin",
        "e09_704_001.lin",
        "e09_704_002.lin",
        "e09_704_003.lin",
        "e09_704_004.lin",
        "e09_704_005.lin",
        "e09_704_100.lin",
        "e09_704_101.lin",
        "e09_704_200.lin",
        "e09_705_000.lin",
        "e09_705_001.lin",
        "e09_705_002.lin",
        "e09_705_003.lin",
        "e09_705_004.lin",
        "e09_705_005.lin",
        "e09_705_100.lin",
        "e09_705_101.lin",
        "e09_705_200.lin",
        "e09_706_000.lin",
        "e09_706_001.lin",
        "e09_706_002.lin",
        "e09_706_003.lin",
        "e09_706_004.lin",
        "e09_706_005.lin",
        "e09_706_100.lin",
        "e09_706_101.lin",
        "e09_706_200.lin",
        "e09_707_000.lin",
        "e09_707_001.lin",
        "e09_707_002.lin",
        "e09_707_003.lin",
        "e09_707_004.lin",
        "e09_707_005.lin",
        "e09_707_100.lin",
        "e09_707_101.lin",
        "e09_707_200.lin",
        "e09_708_000.lin",
        "e09_708_001.lin",
        "e09_708_002.lin",
        "e09_708_003.lin",
        "e09_708_004.lin",
        "e09_708_005.lin",
        "e09_708_100.lin",
        "e09_708_101.lin",
        "e09_708_200.lin",
        "e09_709_000.lin",
        "e09_709_001.lin",
        "e09_709_002.lin",
        "e09_709_003.lin",
        "e09_709_004.lin",
        "e09_709_005.lin",
        "e09_709_100.lin",
        "e09_709_101.lin",
        "e09_709_200.lin",
        "e09_710_000.lin",
        "e09_710_001.lin",
        "e09_710_002.lin",
        "e09_710_003.lin",
        "e09_710_004.lin",
        "e09_710_005.lin",
        "e09_710_100.lin",
        "e09_710_101.lin",
        "e09_710_200.lin",
        "e09_711_000.lin",
        "e09_711_001.lin",
        "e09_711_002.lin",
        "e09_711_003.lin",
        "e09_711_004.lin",
        "e09_711_005.lin",
        "e09_711_100.lin",
        "e09_711_101.lin",
        "e09_711_200.lin",
        "e09_712_000.lin",
        "e09_712_001.lin",
        "e09_712_002.lin",
        "e09_712_003.lin",
        "e09_712_004.lin",
        "e09_712_005.lin",
        "e09_712_100.lin",
        "e09_712_101.lin",
        "e09_712_200.lin",
        "e09_713_000.lin",
        "e09_713_001.lin",
        "e09_713_002.lin",
        "e09_713_003.lin",
        "e09_713_004.lin",
        "e09_713_005.lin",
        "e09_713_100.lin",
        "e09_713_101.lin",
        "e09_713_200.lin",
        "e09_714_000.lin",
        "e09_714_001.lin",
        "e09_714_002.lin",
        "e09_714_003.lin",
        "e09_714_004.lin",
        "e09_714_005.lin",
        "e09_714_100.lin",
        "e09_714_101.lin",
        "e09_714_200.lin",
        "e09_715_000.lin",
        "e09_715_001.lin",
        "e09_715_002.lin",
        "e09_715_003.lin",
        "e09_715_004.lin",
        "e09_715_005.lin",
        "e09_715_100.lin",
        "e09_715_101.lin",
        "e09_715_200.lin",
        "e09_800_000.lin",
        "e09_800_001.lin",
        "e09_900_000.lin",
        "e09_900_001.lin",
        "e09_900_002.lin",
        "e09_900_003.lin",
        "e09_900_004.lin",
        "e09_900_005.lin",
        "e09_900_006.lin",
        "e09_900_007.lin",
        "e09_900_008.lin",
        "e09_900_009.lin",
        "e09_900_010.lin",
        "e09_900_011.lin",
        "e09_900_012.lin",
        "e09_900_013.lin",
        "e09_900_014.lin",
        "e09_900_015.lin",
        "e09_900_016.lin",
        "e09_900_100.lin",
    ],
    logicDive: [
        "ldive_s01.pak",
        "ldive_s02.pak",
        "ldive_s03.pak",
        "ldive_s04.pak",
        "ldive_s05.pak",
        "ldive_s06.pak",
        "ldive_s07.pak",
        "ldive_s08.pak",
        "ldive_s09.pak",
        "ldive_s10.pak",
        "ldive_s11.pak",
    ],
    MAP: [
        "MAP_001.pak",
        "MAP_002.pak",
        "MAP_003.pak",
        "MAP_004.pak",
        "MAP_005.pak",
        "MAP_006.pak",
        "MAP_007.pak",
        "MAP_008.pak",
        "MAP_009.pak",
        "MAP_010.pak",
        "MAP_011.pak",
        "MAP_019.pak",
        "MAP_020.pak",
        "MAP_021.pak",
        "MAP_022.pak",
        "MAP_023.pak",
        "MAP_024.pak",
        "MAP_025.pak",
        "MAP_026.pak",
        "MAP_028.pak",
        "MAP_029.pak",
        "MAP_030.pak",
        "MAP_031.pak",
        "MAP_040.pak",
        "MAP_041.pak",
        "MAP_042.pak",
        "MAP_043.pak",
        "MAP_044.pak",
        "MAP_045.pak",
        "MAP_046.pak",
        "MAP_047.pak",
        "MAP_048.pak",
        "MAP_053.pak",
        "MAP_055.pak",
        "MAP_056.pak",
        "MAP_059.pak",
        "MAP_060.pak",
        "MAP_061.pak",
        "MAP_062.pak",
        "MAP_063.pak",
        "MAP_064.pak",
        "MAP_070.pak",
        "MAP_071.pak",
        "MAP_072.pak",
        "MAP_073.pak",
        "MAP_074.pak",
        "MAP_075.pak",
        "MAP_076.pak",
        "MAP_079.pak",
        "MAP_080.pak",
        "MAP_081.pak",
        "MAP_082.pak",
        "MAP_083.pak",
        "MAP_084.pak",
        "MAP_086.pak",
        "MAP_087.pak",
        "MAP_089.pak",
        "MAP_090.pak",
        "MAP_091.pak",
        "MAP_093.pak",
        "MAP_097.pak",
        "MAP_100.pak",
        "MAP_101.pak",
        "MAP_102.pak",
        "MAP_103.pak",
        "MAP_104.pak",
        "MAP_105.pak",
        "MAP_106.pak",
        "MAP_107.pak",
        "MAP_108.pak",
        "MAP_109.pak",
        "MAP_110.pak",
        "MAP_111.pak",
        "MAP_112.pak",
        "MAP_113.pak",
        "MAP_114.pak",
        "MAP_115.pak",
        "MAP_116.pak",
        "MAP_117.pak",
        "MAP_118.pak",
        "MAP_119.pak",
        "MAP_120.pak",
        "MAP_130.pak",
        "MAP_131.pak",
        "MAP_132.pak",
        "MAP_133.pak",
        "MAP_134.pak",
        "MAP_135.pak",
        "MAP_140.pak",
        "MAP_141.pak",
        "MAP_142.pak",
        "MAP_143.pak",
        "MAP_144.pak",
        "MAP_145.pak",
        "MAP_160.pak",
        "MAP_161.pak",
        "MAP_162.pak",
        "MAP_163.pak",
        "MAP_164.pak",
        "MAP_165.pak",
        "MAP_166.pak",
        "MAP_167.pak",
        "MAP_168.pak",
        "MAP_170.pak",
        "MAP_171.pak",
        "MAP_180.pak",
        "MAP_200.pak",
        "MAP_259.pak",
        "MAP_260.pak",
        "MAP_261.pak",
        "MAP_262.pak",
        "MAP_263.pak",
        "MAP_264.pak",
        "MAP_265.pak",
        "MAP_266.pak",
        "MAP_268.pak",
        "MAP_269.pak",
        "MAP_270.pak",
        "MAP_271.pak",
        "MAP_272.pak",
        "MAP_273.pak",
        "MAP_274.pak",
        "MAP_275.pak",
        "MAP_276.pak",
    ],
    MTB: [
        "mtb2_s01.pak",
        "mtb2_s02.pak",
        "mtb2_s03.pak",
        "mtb2_s04.pak",
        "mtb2_s05.pak",
        "mtb2_s06.pak",
        "mtb2_s07.pak",
        "mtb2_s08.pak",
        "mtb2_s09.pak",
        "mtb2_s10.pak",
        "mtb_s01.pak",
        "mtb_s02.pak",
        "mtb_s03.pak",
        "mtb_s04.pak",
        "mtb_s05.pak",
        "mtb_s06.pak",
        "mtb_s07.pak",
        "mtb_s08.pak",
        "mtb_s09.pak",
        "mtb_s10.pak",
        "mtb_s11.pak",
        "mtb_s21.pak",
        "mtb_s22.pak",
        "mtb_s23.pak",
        "mtb_s24.pak",
        "mtb_s25.pak",
        "mtb_s26.pak",
        "mtb_s27.pak",
        "mtb_s28.pak",
        "mtb_s29.pak",
        "mtb_s30.pak",
        "mtb_s31.pak",
        "mtb_s32.pak",
        "mtb_s33.pak",
        "mtb_s34.pak",
        "mtb_s35.pak",
        "mtb_s36.pak",
        "mtb_s37.pak",
        "mtb_s38.pak",
        "mtb_s39.pak",
        "mtb_s40.pak",
    ],
    DanganronpaIF: [
        "novel_000.lin",
        "novel_001.lin",
        "novel_002.lin",
        "novel_003.lin",
        "novel_004.lin",
        "novel_005.lin",
        "novel_006.lin",
        "novel_007.lin",
        "novel_008.lin",
        "novel_009.lin",
        "novel_010.lin",
        "novel_011.lin",
        "novel_012.lin",
        "novel_013.lin",
        "novel_014.lin",
        "novel_015.lin",
        "novel_016.lin",
        "novel_017.lin",
        "novel_018.lin",
        "novel_019.lin",
        "novel_020.lin",
        "novel_021.lin",
        "novel_022.lin",
        "novel_023.lin",
        "novel_024.lin",
        "novel_025.lin",
        "novel_026.lin",
        "novel_027.lin",
        "novel_028.lin",
        "novel_029.lin",
        "novel_030.lin",
        "novel_031.lin",
        "novel_032.lin",
        "novel_033.lin",
        "novel_034.lin",
    ],
    genericText: [
        "script_pak_e00.pak",
        "script_pak_e01.pak",
        "script_pak_e02.pak",
        "script_pak_e03.pak",
        "script_pak_e04.pak",
        "script_pak_e05.pak",
        "script_pak_e06.pak",
        "script_pak_e07.pak",
        "script_pak_e08.pak",
        "script_pak_e09.pak",
        "script_pak_novel.pak",
    ]
};

class DR2File {

    constructor(fileName) {
        this.basePath = "../../Danganronpa 2 traduction FR/SDSE2_Shared_Data/data01";
        this.directory = fileName;
        this.fulldir = `${this.basePath}/jp/script/${this.directory}/`;

        this.scenesInfo = [];
        this.lines = [];
    }

    checkDir() {
        return fs.lstatSync(this.fulldir).isDirectory();
    }

    getAllLines() {
        this.scenesInfo.forEach(scene => {

            let line = new DR2Line(`${this.basePath}/jp/script/${scene.path}`);
            line.checkFile();
            line.retrieveContent();
            this.lines.push(line);
        });
    }

    computeScenesInfo() {
        return new Promise((resolve, reject) => {
            const pythonProcess = spawn(
                "python",
                ["../SDSE2-Portable/script_pack.py", this.directory, this.basePath]
            );
            pythonProcess.stdout.on('data', (data) => {
                console.log(data);
                let allData = data.toString().split("--------------------\n");
                allData.forEach(line => {
                    if (line === "") {
                        return;
                    }
                    if (line.includes("EOF")) {
                        resolve(true);
                        return;
                    }
                    try {
                        let infos = line.split("\n");
                        this.scenesInfo.push({
                            index: parseInt(infos[0]),
                            bgd: parseInt(infos[1].split(':')[1]),
                            flash: parseInt(infos[2].split(':')[1]),
                            sprite: {
                                char_id: parseInt(infos[3].split('(')[1].split(',')[0]),
                                sprite_id: parseInt(infos[3].split('(')[1].split(',')[1])
                            },
                            path: infos[4].split(':')[1]
                        })
                    } catch (e) {
                        reject(e);
                    }
                });
            });
        });
    }

}

class DR2Line {

    constructor(path) {
        this.path = path;
        this.data = "";
        this.isTranslated = false;

        this.translatedToken = "<text lang=\"en\">";
        this.untranslatedToken = "<text lang=\"en\" />";

        this.text = {
            french: "",
            english: "",
            japanese: ""
        };

        return this;
    }

    openFile() {
        return new Promise((resolve, reject) => {
            let charsetMatch;
            try {
                charsetMatch = detectCharacterEncoding(this.path);
            } catch (e) {
                reject(e);
            }

            if (charsetMatch === "Shift-JIS" || charsetMatch === "ISO-8859-1" || charsetMatch === "Big5") {
                resolve([`${this.untranslatedToken}EMPTY FILE`, "UTF-8"]);
            }
            fs.readFile(this.path, charsetMatch, (err, data) => {
                if (err) {
                    reject(err);
                }
                resolve([data, charsetMatch]);
            });

        });
    }

    checkFile() {
        return new Promise((resolve, reject) => {
            this.openFile().then(([data, encoding]) => {

                if (data.includes(this.untranslatedToken) && (encoding === "UTF-8" || encoding === "UTF-16LE")) {
                    this.data = data;
                    resolve(true);
                } else if (data.includes(this.translatedToken) && (encoding === "UTF-8" || encoding === "UTF-16LE")) {
                    this.data = data;
                    this.isTranslated = true;
                    resolve(true);
                } else {
                    console.error(data, encoding, this.path);
                    reject(false);
                }

            }).catch((err) => {
                console.error(err);
                reject(false);
            });
        });
    }

    retrieveContent() {
        if (this.data.includes("EMPTY FILE")) {
            return false;
        }
        if (this.isTranslated) {
            this.text.french = this.data.substring(
                this.data.indexOf(this.translatedToken) + this.translatedToken.length,
                this.data.indexOf("</text>")
            );
            this.text.english = this.data.substring(
                this.data.indexOf("<text lang=\"ja\">") + "<text lang=\"ja\">".length,
                this.data.indexOf("</text>", this.data.indexOf("</text>") + "</text>".length)
            );
        } else {
            this.text.english = this.data.substring(
                this.data.indexOf("<text lang=\"ja\">") + "<text lang=\"ja\">".length,
                this.data.indexOf("</text>")
            );
        }
        this.text.japanese = this.data.substring(
            this.data.indexOf("<comment>") + "<comment>".length,
            this.data.indexOf("</comment>")
        );
        return true;
    }

}

module.exports = {ALL_DIRS, DR2Line, DR2File};